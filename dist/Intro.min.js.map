{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap","webpack:///./src/polyfill/element-remove.ts","webpack:///./src/config/css.ts","webpack:///./src/utils/helpers.ts","webpack:///./src/index.ts"],"names":["root","factory","exports","module","define","amd","a","i","window","installedModules","__webpack_require__","moduleId","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","Element","CharacterData","DocumentType","forEach","item","configurable","writable","this","parentNode","removeChild","config","helpLayer","referenceLayer","dirData","tipBox","TR","RT","BR","LB","tipTra","_setStyle","elem","setting","style","_getDOM","selector","doms","document","querySelectorAll","length","__webpack_exports__","src_Intro","Intro","el","except","isCanScroll","refreshToTop","_this","domSteps","container","querySelector","queues","addDomData","excepts","isEnd","prevIndex","eq","dir","bounds","top","right","bottom","left","addEventListener","scrollTo","dom","classList","add","push","noArr","callback","_each","dataset","step","currentDom","addBackScreen","Utils","createElement","id","className","innerHTML","appendChild","tipIndex","tipInfo","btnBox","btnNext","btnSkip","next","destory","opacity","resize","index","size","getBoundingClientRect","remove","setTimeout","highlight","target","bg","flag","position","innerText","intro","required","display","contains","csize","width","height","innerHeight","tsize","console","log","alignTipBox","data","dis","scrollIntoView","behavior","tagName","scrollTop","documentElement","body"],"mappings":"CAAA,SAAAA,EAAAC,GACA,oBAAAC,SAAA,iBAAAC,OACAA,OAAAD,QAAAD,SACA,sBAAAG,eAAAC,IACAD,UAAAH,OACA,CACA,IAAAK,EAAAL,IACA,QAAAM,KAAAD,GAAA,iBAAAJ,gBAAAF,GAAAO,GAAAD,EAAAC,IAPA,CASCC,OAAA,WACD,mBCTA,IAAAC,KAGA,SAAAC,EAAAC,GAGA,GAAAF,EAAAE,GACA,OAAAF,EAAAE,GAAAT,QAGA,IAAAC,EAAAM,EAAAE,IACAJ,EAAAI,EACAC,GAAA,EACAV,YAUA,OANAW,EAAAF,GAAAG,KAAAX,EAAAD,QAAAC,IAAAD,QAAAQ,GAGAP,EAAAS,GAAA,EAGAT,EAAAD,QA0DA,OArDAQ,EAAAK,EAAAF,EAGAH,EAAAM,EAAAP,EAGAC,EAAAO,EAAA,SAAAf,EAAAgB,EAAAC,GACAT,EAAAU,EAAAlB,EAAAgB,IACAG,OAAAC,eAAApB,EAAAgB,GAA0CK,YAAA,EAAAC,IAAAL,KAK1CT,EAAAe,EAAA,SAAAvB,GACA,oBAAAwB,eAAAC,aACAN,OAAAC,eAAApB,EAAAwB,OAAAC,aAAwDC,MAAA,WAExDP,OAAAC,eAAApB,EAAA,cAAiD0B,OAAA,KAQjDlB,EAAAmB,EAAA,SAAAD,EAAAE,GAEA,GADA,EAAAA,IAAAF,EAAAlB,EAAAkB,IACA,EAAAE,EAAA,OAAAF,EACA,KAAAE,GAAA,iBAAAF,QAAAG,WAAA,OAAAH,EACA,IAAAI,EAAAX,OAAAY,OAAA,MAGA,GAFAvB,EAAAe,EAAAO,GACAX,OAAAC,eAAAU,EAAA,WAAyCT,YAAA,EAAAK,UACzC,EAAAE,GAAA,iBAAAF,EAAA,QAAAM,KAAAN,EAAAlB,EAAAO,EAAAe,EAAAE,EAAA,SAAAA,GAAgH,OAAAN,EAAAM,IAAqBC,KAAA,KAAAD,IACrI,OAAAF,GAIAtB,EAAA0B,EAAA,SAAAjC,GACA,IAAAgB,EAAAhB,KAAA4B,WACA,WAA2B,OAAA5B,EAAA,SAC3B,WAAiC,OAAAA,GAEjC,OADAO,EAAAO,EAAAE,EAAA,IAAAA,GACAA,GAIAT,EAAAU,EAAA,SAAAiB,EAAAC,GAAsD,OAAAjB,OAAAkB,UAAAC,eAAA1B,KAAAuB,EAAAC,IAGtD5B,EAAA+B,EAAA,KAIA/B,IAAAgC,EAAA,mCClEIC,QAAQJ,UAAWK,cAAcL,UAAWM,aAAaN,WAbrDO,QAAQ,SAAUC,GACdA,EAAKP,eAAe,WAGxBnB,OAAOC,eAAeyB,EAAM,UACxBC,cAAc,EACdzB,YAAY,EACZ0B,UAAU,EACVrB,MAAO,WACHsB,KAAKC,WAAWC,YAAYF,yDCM7BG,GAjBXC,UAAW,KACXC,eAAgB,KAChBC,SACIC,QACIC,GAAM,SACNC,GAAM,SACNC,GAAM,SACNC,GAAM,UAEVC,QACIJ,GAAM,aACNC,GAAM,WACNC,GAAM,UACNC,GAAM,eC2EX,SAASE,EAAUC,EAAMC,GAC5B,IAAK,IAAI/B,KAAO+B,EACZD,EAAKE,MAAMhC,GAAO+B,EAAQ/B,GAI3B,SAASiC,EAAQC,GACpB,IAAIC,EAAOC,SAASC,iBAAiBH,GACrC,OAAsB,GAAfC,EAAKG,OAAcH,EAAK,GAAKA,OCjGxC3D,EAAAO,EAAAwD,EAAA,0BAAAC,IAKA,IAAIC,EAAuB,WAEvB,SAASA,EAAMC,EAAIvB,QACA,IAAXA,IAAqBA,GACrBwB,UACAC,aAAa,EACbC,cAAc,IAElB,IAAIC,EAAQ9B,KACR+B,EAAWd,EAAQ,eAEvBjB,KAAKgC,UAAYZ,SAASa,cAAcP,GACxC1B,KAAKG,OAASA,EACdH,KAAKkC,UACLlC,KAAKmC,cACLnC,KAAKoC,WACLpC,KAAKqC,OAAQ,EACbrC,KAAKsC,WAAa,EAClBtC,KAAKuC,GAAK,EACVvC,KAAKwC,IAAM,KACXxC,KAAKyC,QACDC,IAAK,EACLC,MAAO,EACPC,OAAQ,EACRC,KAAM,GAGN7C,KAAKG,OAAO0B,cACZvE,OAAOwF,iBAAiB,eAAgB,WACpCxF,OAAOyF,SAAS,EAAG,KAIvB/C,KAAKG,OAAOwB,QAAU3B,KAAKG,OAAOwB,OAAOL,OAAS,GACjDtB,KAAKG,OAAOwB,OAAQ/B,QAAQ,SAAUsB,GACnC,IAAI8B,EAAM/B,EAAQC,GAClB8B,EAAIC,UAAUC,IAAI,mBAClBpB,EAAMM,QAAQe,KAAKH,KD0D5B,SAAeI,EAAOC,MACtBzD,QAAQhC,KAAKwF,EAAOC,GCvDnBC,CAAMvB,EAAU,SAAUiB,GACtBlB,EAAMI,OAAOc,EAAIO,QAAQC,KAAO,GAAKR,IAEzChD,KAAKyD,WAAazD,KAAKkC,OAAO,GAE9BlC,KAAK0D,cAAc1D,KAAKgC,UAAWhC,KAAKG,OAAOyB,aAG/C+B,EAAMvD,UAAYgB,SAASwC,cAAc,OACzCD,EAAMvD,UAAUyD,GAAK,KACrBF,EAAMvD,UAAU0D,UAAY,kBAE5BH,EAAMtD,eAAiBe,SAASwC,cAAc,OAC9CD,EAAMvD,UAAU0D,UAAY,kCAC5BH,EAAMvD,UAAU2D,UAAY,yiBAC5B/D,KAAKgC,UAAUgC,YAAYL,EAAMvD,WACjCJ,KAAKgC,UAAUgC,YAAYL,EAAMtD,gBACjCL,KAAKiE,SAAWhD,EAAQ,aACxBjB,KAAKkE,QAAUjD,EAAQ,YACvBjB,KAAKmE,OAASlD,EAAQ,cACtBjB,KAAKO,OAASU,EAAQ,iBACtBjB,KAAKY,OAASK,EAAQ,iBACtBjB,KAAKoE,QAAUnD,EAAQ,mBACvBjB,KAAKqE,QAAUpD,EAAQ,mBAEvBjB,KAAKoE,QAAQtB,iBAAiB,QAAS,WACnChB,EAAMwC,SACP,GAEHtE,KAAKqE,QAAQvB,iBAAiB,QAAS,WACnChB,EAAMyC,YACP,GACH1D,EAAU8C,EAAMvD,WACZoE,QAAW,MAGfxE,KAAKmC,WAAL,UAA+BwB,EAAMvD,UACrCJ,KAAKmC,WAAL,eAAoCwB,EAAMtD,eAE1CL,KAAKsE,KAAK,GAEVhH,OAAOwF,iBAAiB,SAAU,WAC9BhB,EAAM2C,WACP,GAgLP,OA9KAhD,EAAMpC,UAAUiF,KAAO,SAAUI,GAC7B,IAAI5C,EAAQ9B,KACZ,QAAoB,IAAT0E,EAAsB,CAE7B,GADAA,IACI1E,KAAKsC,WAAaoC,EAIlB,OAHA1E,KAAKuC,GAAKmC,EAMlB,IAAI1E,KAAKqC,MAAT,CAIArC,KAAKsC,UAAYtC,KAAKuC,GACtBvC,KAAKuC,GAAKvC,KAAKuC,IAAMvC,KAAKkC,OAAOZ,QAAU,EAAItB,KAAKuC,GACpDvC,KAAKyD,WAAazD,KAAKkC,OAAOlC,KAAKuC,KAAOvC,KAAKkC,OAAO,GACtD,IAAIyC,EAAO3E,KAAKyD,WAAWmB,wBACf5E,KAAKgC,UAAU4C,yBACX,GAAZ5E,KAAKuC,IAELvC,KAAKuE,UAELvE,KAAK+C,SAAS,GACd/C,KAAKqC,OAAQ,IAIbrC,KAAKkC,OAAOtC,QAAQ,SAAUoD,EAAK0B,GAC3BA,GAAS5C,EAAMS,IACfS,EAAIC,UAAU4B,OAAO,qBAI7BC,WAAW,WACPhD,EAAMiB,SAAS4B,EAAKjC,IAAK,WACrBZ,EAAMiD,YACNjD,EAAMS,QAEX,MAIXd,EAAMpC,UAAUkF,QAAU,WAEtB,IAAK,IAAIvF,KAAOgB,KAAKmC,WACjBnC,KAAKmC,WAAWnD,IAAQgB,KAAKmC,WAAWnD,GAAK6F,SAGjD7E,KAAKkC,OAAOtC,QAAQ,SAAUoD,GAC1BA,EAAIC,UAAU4B,OAAO,qBAEzB7E,KAAKoC,QAAQxC,QAAQ,SAAUoD,GAC3BA,EAAIC,UAAU4B,OAAO,qBAEzB7E,KAAKgC,UAAUiB,UAAU4B,OAAO,oBAGpCpD,EAAMpC,UAAUqE,cAAgB,SAAUsB,EAAQpD,GAC9C,IAAIqD,EAAK7D,SAASwC,cAAc,OAChCqB,EAAG1B,QAAQ2B,KAAO,KAClBD,EAAGnB,UAAY,WACfmB,EAAGjE,MAAMmE,SAAWvD,EAAc,YAAc,QAChDoD,EAAO/B,UAAUC,IAAI,mBACrB8B,EAAOhB,YAAYiB,GACnBjF,KAAKmC,WAAL,GAAwB8C,GAG5BxD,EAAMpC,UAAU0F,UAAY,WACxBlE,EAAU8C,EAAMvD,WACZoE,QAAW,MAGfxE,KAAKkE,QAAQkB,UAAYpF,KAAKyD,WAAWF,QAAQ8B,OAAS,GAC1DrF,KAAKiE,SAASmB,UAAYpF,KAAKyD,WAAWF,QAAQC,MAAQ,GAEtDxD,KAAKyD,WAAWF,QAAQ+B,SACxBzE,EAAUb,KAAKmE,QACXoB,QAAW,SAIf1E,EAAUb,KAAKmE,QACXoB,QAAW,WAIjBvF,KAAKyD,WAAWR,UAAUuC,SAAS,oBAAuBxF,KAAKyD,WAAWR,UAAUC,IAAI,mBAC1FlD,KAAKyE,UAGThD,EAAMpC,UAAUoF,OAAS,WACrB,IAAIE,EAAO3E,KAAKyD,WAAWmB,wBACvBa,EAAQzF,KAAKgC,UAAU4C,wBAC3B/D,EAAU8C,EAAMvD,WACZsC,IAAOiC,EAAKjC,IAAM+C,EAAM/C,IAAM,KAC9BG,KAAQ8B,EAAK9B,KAAO4C,EAAM5C,KAAO,KACjC6C,MAASf,EAAKe,MAAQ,KACtBC,OAAUhB,EAAKgB,OAAS,OAE5B9E,EAAU8C,EAAMtD,gBACZqC,IAAOiC,EAAKjC,IAAM+C,EAAM/C,IAAM,KAC9BG,KAAQ8B,EAAK9B,KAAO4C,EAAM5C,KAAO,KACjC6C,MAASf,EAAKe,MAAQ,KACtBC,OAAUhB,EAAKgB,OAAS,OAE5B3F,KAAKyC,QACDC,IAAKiC,EAAKjC,IACVG,KAAM8B,EAAK9B,KACXD,OAAQtF,OAAOsI,YAAcjB,EAAKjC,IAAMiC,EAAKgB,OAC7ChD,MAAO8C,EAAMC,MAAQf,EAAKhC,OAG9B,IAAIkD,EAAQ7F,KAAKO,OAAOqE,wBACpB5E,KAAKyC,OAAOE,MAAQkD,EAAMH,MAC1B1F,KAAKwC,IAAM,KAENxC,KAAKyC,OAAOG,OAASiD,EAAMF,OAChC3F,KAAKwC,IAAM,KAENxC,KAAKyC,OAAOI,KAAOgD,EAAMH,MAC9B1F,KAAKwC,IAAM,KAENxC,KAAKyC,OAAOC,IAAMmD,EAAMF,OAC7B3F,KAAKwC,IAAM,KAIXsD,QAAQC,IAAI,uBAEhB/F,KAAKgG,eAGTvE,EAAMpC,UAAU2G,YAAc,WAC1B,IAAIC,EAAOtC,EAAMrD,QAEjB,IAAK,IAAItB,KAAOiH,EAAK1F,OACjBP,KAAKO,OAAO0C,UAAU4B,OAAOoB,EAAK1F,OAAOvB,IAK7C,IAAK,IAAIA,KAFTgB,KAAKO,OAAO0C,UAAUC,IAAI+C,EAAK1F,OAAOP,KAAKwC,MAE3ByD,EAAKrF,OACjBZ,KAAKY,OAAOqC,UAAU4B,OAAOoB,EAAKrF,OAAO5B,IAG7CgB,KAAKY,OAAOqC,UAAUC,IAAI+C,EAAKrF,OAAOZ,KAAKwC,OAG/Cf,EAAMpC,UAAU0D,SAAW,SAAUmD,EAAK7C,GACtC,IAAIX,EAAMwD,EAAM,EAAIlG,KAAKyD,WAAWmB,wBAAwBlC,IAAMwD,EACpB,mBAAnClG,KAAKyD,WAAW0C,eACvBnG,KAAKyD,WAAW0C,gBACZC,SAAY,WAGgB,mBAApB9I,OAAOyF,SACnBzF,OAAOyF,UACHqD,SAAY,SACZ1D,IAAOA,IAIoB,SAA3B1C,KAAKgC,UAAUqE,SAAiD,SAA3BrG,KAAKgC,UAAUqE,QACpDrG,KAAKgC,UAAUsE,UAAY5D,GAG3BtB,SAASmF,kBAAoBnF,SAASmF,gBAAgBD,UAAY5D,GAClEtB,SAASoF,KAAKF,UAAY5D,GAGlCW,GAAYA,KAET5B,EApQgB","file":"Intro.min.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse {\n\t\tvar a = factory();\n\t\tfor(var i in a) (typeof exports === 'object' ? exports : root)[i] = a[i];\n\t}\n})(window, function() {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"./\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 1);\n","\"use strict\";\n// Element.remove\n(function (arr) {\n    arr.forEach(function (item) {\n        if (item.hasOwnProperty('remove')) {\n            return;\n        }\n        Object.defineProperty(item, 'remove', {\n            configurable: true,\n            enumerable: true,\n            writable: true,\n            value: function () {\n                this.parentNode.removeChild(this);\n            }\n        });\n    });\n})([Element.prototype, CharacterData.prototype, DocumentType.prototype]);\n","var config = {\n    helpLayer: null,\n    referenceLayer: null,\n    dirData: {\n        tipBox: {\n            \"TR\": \"tip-tr\",\n            \"RT\": \"tip-rt\",\n            \"BR\": \"tip-br\",\n            \"LB\": \"tip-lb\"\n        },\n        tipTra: {\n            \"TR\": \"tra-bottom\",\n            \"RT\": \"tra-left\",\n            \"BR\": \"tra-top\",\n            \"LB\": \"tra-right\"\n        }\n    }\n};\nexport default config;\n","// createCssStyleSheet\nexport function _createCSSStyle(selector, style) {\n    // 判断支持 styleSheets\n    if (!document.styleSheets) {\n        return;\n    }\n    // 判断是否有head\n    if (document.getElementsByTagName(\"head\").length == 0) {\n        return;\n    }\n    var styleSheet;\n    var mediaType;\n    // 判断dom中的样式表存在\n    if (document.styleSheets.length > 0) {\n        for (var i = 0; i < document.styleSheets.length; i++) {\n            if (document.styleSheets[i].disabled) {\n                continue;\n            }\n            var media = document.styleSheets[i].media;\n            mediaType = typeof media;\n            if (mediaType == \"string\") { // TODO\n                // if (media == \"\" || (media.indexOf(\"screen\") != -1)) {\n                //     styleSheet = document.styleSheets[i];\n                // }\n            }\n            else if (mediaType == \"object\") {\n                if (media.mediaText == \"\" || (media.mediaText.indexOf(\"screen\") != -1)) {\n                    styleSheet = document.styleSheets[i];\n                }\n            }\n            if (typeof styleSheet != \"undefined\") {\n                break;\n            }\n        }\n    }\n    // 创建新的style\n    if (typeof styleSheet == \"undefined\") {\n        var styleSheetElement = document.createElement(\"style\");\n        styleSheetElement.type = \"text/css\";\n        document.getElementsByTagName(\"head\")[0].appendChild(styleSheetElement);\n        for (var i = 0; i < document.styleSheets.length; i++) {\n            if (document.styleSheets[i].disabled) {\n                continue;\n            }\n            styleSheet = document.styleSheets[i];\n        }\n        var media = styleSheet.media;\n        mediaType = typeof media;\n    }\n    if (mediaType == \"string\") {\n        for (var i = 0; i < styleSheet.rules.length; i++) {\n            if (styleSheet.rules[i].selectorText && styleSheet.rules[i].selectorText.toLowerCase() == selector.toLowerCase()) {\n                styleSheet.rules[i].style.cssText = style;\n                return;\n            }\n        }\n        // 插入style规则\n        styleSheet.addRule(selector, style);\n    }\n    else if (mediaType == \"object\") {\n        var styleSheetLength = (styleSheet.cssRules) ? styleSheet.cssRules.length : 0;\n        for (var i = 0; i < styleSheetLength; i++) {\n            if (styleSheet.cssRules[i].selectorText && styleSheet.cssRules[i].selectorText.toLowerCase() == selector.toLowerCase()) {\n                styleSheet.cssRules[i].style.cssText = style;\n                return;\n            }\n        }\n        // 插入style规则\n        styleSheet.insertRule(selector + \"{\" + style + \"}\", styleSheetLength);\n    }\n}\n// createCssStyle\nexport function _createCSS(styleObj) {\n    for (var selector in styleObj) {\n        _createCSSStyle(selector, styleObj[selector]);\n    }\n}\n// getStyle\nexport function _getStyle(elem, prop) {\n    var res;\n    if (window.getComputedStyle) {\n        res = window.getComputedStyle(elem, null)[prop];\n    }\n    else {\n        res = elem.currentStyle[prop];\n    }\n    return res;\n}\n// setStyle\nexport function _setStyle(elem, setting) {\n    for (var key in setting) {\n        elem.style[key] = setting[key];\n    }\n}\n// getDOM\nexport function _getDOM(selector) {\n    var doms = document.querySelectorAll(selector);\n    return doms.length == 1 ? doms[0] : doms;\n}\n// non array forEach\nexport function _each(noArr, callback) {\n    [].forEach.call(noArr, callback);\n}\n","import \"./polyfill/element-remove\";\nimport Utils from \"./config/css\";\nimport { _setStyle, _getDOM, _each } from \"./utils/helpers\";\nimport \"./static/css/main.css\";\n// class\nvar Intro = /** @class */ (function () {\n    // init\n    function Intro(el, config) {\n        if (config === void 0) { config = {\n            except: [],\n            isCanScroll: false,\n            refreshToTop: false\n        }; }\n        var _this = this;\n        var domSteps = _getDOM(\"[data-step]\");\n        // init \n        this.container = document.querySelector(el);\n        this.config = config;\n        this.queues = [];\n        this.addDomData = {};\n        this.excepts = [];\n        this.isEnd = false;\n        this.prevIndex = -1;\n        this.eq = 0;\n        this.dir = \"RT\" /* RT */;\n        this.bounds = {\n            top: 0,\n            right: 0,\n            bottom: 0,\n            left: 0\n        };\n        // if config 'refreshToTop' is true,then scroll to top after refresh\n        if (this.config.refreshToTop) {\n            window.addEventListener(\"beforeunload\", function () {\n                window.scrollTo(0, 0);\n            });\n        }\n        // except doms\n        if (this.config.except && this.config.except.length > 0) {\n            (this.config.except).forEach(function (selector) {\n                var dom = _getDOM(selector);\n                dom.classList.add(\"intro-highlight\");\n                _this.excepts.push(dom);\n            });\n        }\n        // add queue\n        _each(domSteps, function (dom) {\n            _this.queues[dom.dataset.step - 1] = dom;\n        });\n        this.currentDom = this.queues[0];\n        // make mask\n        this.addBackScreen(this.container, this.config.isCanScroll);\n        // ========= make tips ==========\n        // position layer\n        Utils.helpLayer = document.createElement(\"div\");\n        Utils.helpLayer.id = \"b1\";\n        Utils.helpLayer.className = \"intro-helplayer\";\n        // reference layer\n        Utils.referenceLayer = document.createElement(\"div\");\n        Utils.helpLayer.className = \"intro-helplayer intro-reference\";\n        Utils.helpLayer.innerHTML = \"\\n            <div class=\\\"intro-tip tip-rt\\\" id=\\\"intro_tipBox\\\">\\n                <p class=\\\"intro-tip-text\\\" id=\\\"tipInfo\\\">Hello,I'm a tip</p>\\n                <div class=\\\"intro-tip-item\\\" id=\\\"tipBtnBox\\\">\\n                    <span id=\\\"intro_btn_next\\\" class=\\\"intro_btn\\\">next</span>\\n                    <span id=\\\"intro_btn_skip\\\" class=\\\"intro_btn\\\">skip</span>\\n                </div>\\n                <div class=\\\"intro-tip-trangle tra-left\\\" id=\\\"intro_tipTra\\\"></div>\\n            </div>\\n            <div class=\\\"intro-index\\\" id=\\\"tipIndex\\\">1</div>\\n        \";\n        this.container.appendChild(Utils.helpLayer);\n        this.container.appendChild(Utils.referenceLayer);\n        this.tipIndex = _getDOM(\"#tipIndex\");\n        this.tipInfo = _getDOM(\"#tipInfo\");\n        this.btnBox = _getDOM(\"#tipBtnBox\");\n        this.tipBox = _getDOM(\"#intro_tipBox\");\n        this.tipTra = _getDOM(\"#intro_tipTra\");\n        this.btnNext = _getDOM(\"#intro_btn_next\"); // btn next\n        this.btnSkip = _getDOM(\"#intro_btn_skip\"); // btn skip\n        // next\n        this.btnNext.addEventListener(\"click\", function () {\n            _this.next();\n        }, false);\n        // skip\n        this.btnSkip.addEventListener(\"click\", function () {\n            _this.destory();\n        }, false);\n        _setStyle(Utils.helpLayer, {\n            \"opacity\": \"0\"\n        });\n        // save dom\n        this.addDomData[\"helplayer\"] = Utils.helpLayer;\n        this.addDomData[\"referenceLayer\"] = Utils.referenceLayer;\n        // default to step 1\n        this.next(1);\n        // resize\n        window.addEventListener(\"resize\", function () {\n            _this.resize();\n        }, false);\n    }\n    Intro.prototype.next = function (index) {\n        var _this = this;\n        if (typeof index != \"undefined\") {\n            index--; // 1->0\n            if (this.prevIndex != index) {\n                this.eq = index;\n            }\n            else {\n                return;\n            }\n        }\n        if (this.isEnd) {\n            return;\n        }\n        // cache prev index\n        this.prevIndex = this.eq;\n        this.eq = this.eq >= this.queues.length ? -1 : this.eq;\n        this.currentDom = this.queues[this.eq] || this.queues[0]; // eq 0  data-step 0\n        var size = this.currentDom.getBoundingClientRect();\n        var csize = this.container.getBoundingClientRect();\n        if (this.eq == -1) {\n            // destory\n            this.destory();\n            // scrollTo start step\n            this.scrollTo(0);\n            this.isEnd = true;\n        }\n        else {\n            // reset info but curdom\n            this.queues.forEach(function (dom, index) {\n                if (index != _this.eq) {\n                    dom.classList.remove(\"intro-highlight\");\n                }\n            });\n            // highlight currentDom target\n            setTimeout(function () {\n                _this.scrollTo(size.top, function () {\n                    _this.highlight();\n                    _this.eq++;\n                });\n            }, 0);\n        }\n    };\n    // destory\n    Intro.prototype.destory = function () {\n        // remove all add dom\n        for (var key in this.addDomData) {\n            this.addDomData[key] && this.addDomData[key].remove();\n        }\n        // remove all class\n        this.queues.forEach(function (dom) {\n            dom.classList.remove(\"intro-highlight\");\n        });\n        this.excepts.forEach(function (dom) {\n            dom.classList.remove(\"intro-highlight\");\n        });\n        this.container.classList.remove(\"intro-container\");\n    };\n    // add bg of target\n    Intro.prototype.addBackScreen = function (target, isCanScroll) {\n        var bg = document.createElement(\"div\");\n        bg.dataset.flag = \"bg\";\n        bg.className = \"intro-bg\";\n        bg.style.position = isCanScroll ? \"absoluted\" : \"fixed\";\n        target.classList.add(\"intro-container\");\n        target.appendChild(bg);\n        this.addDomData[\"bg\"] = bg;\n    };\n    // move Utils.helpLayer and highlight target\n    Intro.prototype.highlight = function () {\n        _setStyle(Utils.helpLayer, {\n            \"opacity\": \"1\"\n        });\n        // change tip info\n        this.tipInfo.innerText = this.currentDom.dataset.intro || '';\n        this.tipIndex.innerText = this.currentDom.dataset.step || '';\n        // isRequired\n        if (this.currentDom.dataset.required) {\n            _setStyle(this.btnBox, {\n                \"display\": \"none\"\n            });\n        }\n        else {\n            _setStyle(this.btnBox, {\n                \"display\": \"block\"\n            });\n        }\n        //addclass intro-highlight\n        !(this.currentDom.classList.contains(\"intro-highlight\")) && this.currentDom.classList.add(\"intro-highlight\");\n        this.resize();\n    };\n    // resize box\n    Intro.prototype.resize = function () {\n        var size = this.currentDom.getBoundingClientRect();\n        var csize = this.container.getBoundingClientRect();\n        _setStyle(Utils.helpLayer, {\n            \"top\": size.top - csize.top + \"px\",\n            \"left\": size.left - csize.left + \"px\",\n            \"width\": size.width + \"px\",\n            \"height\": size.height + \"px\"\n        });\n        _setStyle(Utils.referenceLayer, {\n            \"top\": size.top - csize.top + \"px\",\n            \"left\": size.left - csize.left + \"px\",\n            \"width\": size.width + \"px\",\n            \"height\": size.height + \"px\"\n        });\n        this.bounds = {\n            top: size.top,\n            left: size.left,\n            bottom: window.innerHeight - size.top - size.height,\n            right: csize.width - size.right\n        };\n        // resize tipbox\n        var tsize = this.tipBox.getBoundingClientRect();\n        if (this.bounds.right > tsize.width) {\n            this.dir = \"RT\" /* RT */;\n        }\n        else if (this.bounds.bottom > tsize.height) {\n            this.dir = \"BR\" /* BR */;\n        }\n        else if (this.bounds.left > tsize.width) {\n            this.dir = \"LB\" /* LB */;\n        }\n        else if (this.bounds.top > tsize.height) {\n            this.dir = \"TR\" /* TR */;\n        }\n        else {\n            // 外部没有空间了\n            console.log(\"outter is not null!\");\n        }\n        this.alignTipBox();\n    };\n    // realign tipbox\n    Intro.prototype.alignTipBox = function () {\n        var data = Utils.dirData;\n        // remove all tipBox class\n        for (var key in data.tipBox) {\n            this.tipBox.classList.remove(data.tipBox[key]);\n        }\n        // add\n        this.tipBox.classList.add(data.tipBox[this.dir]);\n        // remove all tipTra class\n        for (var key in data.tipTra) {\n            this.tipTra.classList.remove(data.tipTra[key]);\n        }\n        // add\n        this.tipTra.classList.add(data.tipTra[this.dir]);\n    };\n    // scroll pos\n    Intro.prototype.scrollTo = function (dis, callback) {\n        var top = dis < 0 ? this.currentDom.getBoundingClientRect().top : dis;\n        if (typeof this.currentDom.scrollIntoView === \"function\") {\n            this.currentDom.scrollIntoView({\n                \"behavior\": \"smooth\"\n            });\n        }\n        else if (typeof window.scrollTo === \"function\") {\n            window.scrollTo({\n                \"behavior\": \"smooth\",\n                \"top\": top\n            });\n        }\n        else {\n            if (this.container.tagName !== \"BODY\" && this.container.tagName !== \"HTML\") {\n                this.container.scrollTop = top;\n            }\n            else {\n                document.documentElement && (document.documentElement.scrollTop = top);\n                document.body.scrollTop = top;\n            }\n        }\n        callback && callback();\n    };\n    return Intro;\n}());\nexport { Intro };\n"],"sourceRoot":""}